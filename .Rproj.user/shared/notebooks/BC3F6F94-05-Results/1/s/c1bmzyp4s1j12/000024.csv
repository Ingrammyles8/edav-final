"0","# merges all the separate food group dataframes into one dataframe joined by year"
"0","allfoods = merge(meateggsnuts[-c(1)], "
"0","                 merge(sugars[-c(1)], "
"0","                 merge(dairy[-c(1)], "
"0","                 merge(fats[-c(1)], "
"0","                 merge(fruits[-c(1)], merge(grains[-c(1)], vegetables[-c(1)], by =""Year""), by =""Year""), by =""Year""), by =""Year""), by =""Year""), by =""Year"")"
"0",""
"0","# converts the dataframe into a tidy format and changes the calorie values into numeric"
"0","allfoods_tidy <- tidy_calorie_data(allfoods)"
"0","allfoods_tidy$calories <- as.numeric(allfoods_tidy$calories)"
"2","NAs introduced by coercion"
"0","allfoods_na <- allfoods_tidy %>% dplyr::group_by(food_group) %>% dplyr::filter(!any(is.na(calories)))"
"0",""
"0","# gets the percent difference from 2000 for each year for each food"
"0","allfoods_tidy <- allfoods_tidy %>% dplyr::group_by(food_group) %>%"
"0","  dplyr::mutate(perc_dif = round((calories-first(calories))/first(calories)*100, 4)) "
"0",""
"0","# makes a dataframe for the mean calorie intake for each food"
"0","meanfoods <- allfoods_tidy %>% dplyr::group_by(food_group) %>% dplyr::summarise(Mean = round(mean(calories, na.rm = TRUE), 2))"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
"0","# takes the top 25 foods that have the highest mean calorie intake for analysis and gets rid of foods that have na values for certain years"
"0","topfoods <- head(meanfoods %>% arrange(desc(Mean)), 25)"
"0","meannafoods <- allfoods_na %>% dplyr::group_by(food_group) %>% dplyr::summarise(Mean = round(mean(calories, na.rm = TRUE), 2))"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
"0","topnafoods <- head(meannafoods %>% arrange(desc(Mean)), 25)"
"0",""
"0","# # "
"0","# topfoods %>%"
"0","#   mutate(food_group=factor(food_group, levels=food_group)) %>%"
"0","#   ggplot()+"
"0","#     geom_bar(aes(x=food_group, y=Mean), stat=""identity"") +"
"0","#     theme(axis.text.x = element_text(angle=60, hjust=1))"
"0",""
"0","# bar graph of the top 25 foods that contribute the most to total caloric intake"
"0","topnafoods %>%"
"0","  mutate(food_group=factor(food_group, levels=food_group)) %>%"
"0","  ggplot()+"
"0","    geom_bar(aes(x=food_group, y=Mean), stat=""identity"") +"
"0","    ylab(""Mean Daily Per Capita Calories"")+"
"0","    xlab(""Foods"")+"
"0","    ggtitle(""Top 25 Calorie Intake Food Sources"")+"
"0","    theme(axis.text.x = element_text(angle=60, hjust=1))"
